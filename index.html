<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>GNU bc for Mathematicians | Pierce</title>
    <meta name="author" content="Mike Pierce">
    <meta name="description" content="A guide to using GNU bc written with mathematicians and instructors in mind">

    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" media="all" href="../assets/main.css">
    <link rel="stylesheet" href="../assets/highlight.min.css">
    <style>body{background-image:linear-gradient(transparent, var(--background)), url("banner.webp");}</style>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.js" integrity="sha384-GxNFqL3r9uRJQhR+47eDxuPoNE7yLftQM8LcxzgS4HT73tp970WS/wV5p8UzCOmb" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.3.1/build/highlight.min.js" integrity="sha384-zDX/4RkDnpVxZkjJjxdzDsT1Kk2XThh7u47fXdgZ1W8AMjb//F4ZK4G4y7oNVHM1" crossorigin="anonymous"></script>
    <script>hljs.highlightAll();</script>
</head>


<body>

<header>
<h1> The GNU Basic Calculator (bc): a Quick-Start Guide for Mathematicians</h1>
<ul>
    <li> <address><a href="..">Mike Pierce</a></address></li>
    <li> Last tended 4 January 2023 </li>
    <li> Contribute: <a href="https://github.com/mikepierce/Article-GNU-bc-Guide">fork on GitHub</a></li>
</ul>
</header>

<main>
<section>
<p>
The <a href="https://en.wikipedia.org/wiki/Bc_(programming_language)" title="Wikipedia: bc (programming language)">GNU basic calculator (bc)</a>
is a free and open source command-line program 
that performs arbitrary-precision calculations
using the full capabilities of any computer.
This tool is more robust than most OS’s default calculator app,
much faster than a TI calculator,
and more convenient to use than the computational sledgehammers
Mathematica and Jupyter/python.
And it’s only <q>basic</q> by default;
bc is a full programming language too, 
extendable with user-written functions.
</p>
<p>
Professionally speaking, bc is the most elegant tool 
for mathematicians to attain 
<a href="https://urbigenous.net/library/power.html" title="a short story by Isaac Asimov">the feeling of power</a>
that comes with wielding a computer to do arbitrarily precise computations.
Pedagogically speaking, bc provides many benefits:
a means to subvert the pervasiveness of 
<a href="https://gen.medium.com/big-calculator-how-texas-instruments-monopolized-math-class-67ee165045dc" title="Big Calculator: How Texas Instruments Monopolized Math Class">proprietary hardware </a>,
and software in classrooms,
an easy way to demonstrate the computational capabilities of a computer to students,
and also an accessible avenue for students to operate a computer as a calculator for themselves.
</p>
</section>

<nav>
<h2 id="contents"> Contents </h2>
<ul>
    <li> <a href="#nix"> Installing bc on Linux or macOS</a></li>
    <li> <a href="#windows"> Installing bc on MS Windows</a></li>
    <li> <a href="#usage"> Getting Started Using bc</a> </li>
    <li>
    <ul>
        <li> <a href="#var"> Using Variables</a></li>
        <li> <a href="#scale"> Controlling the Scale of bc’s Computations</a></li>
        <li> <a href="#pow"> Handling Fractional Exponents</a></li>
        <li> <a href="#int"> Getting the Integer Part of a Number</a></li>
        <li> <a href="#mathlib"> Extending bc with its Math Library</a></li>
        <!-- <li> <a href="#base"> Computations in Different Bases</a></li> -->
    </ul>
    </li>
    <li> <a href="#programming"> Programming: Functions, Arrays, and Limitations </a></li>
    <li>
    <ul>
        <li> <a href="#functions"> Defining Functions </a></li>
        <li> <a href="#print">  Printing Output &amp; Reading Input </a></li>
        <li> <a href="#control"> Control-Flow Syntax &amp; Arithmetic </a></li>
        <li> <a href="#arrays"> Array Variables &amp; Loops </a></li>
        <li> <a href="#limits"> Limitations of bc </a></li>
    </ul>
    </li>
    <!-- <li> <a href="#readline"> GNU Readline Keyboard Shortcuts </a></li> -->
    <li> <a href="#exercises"> Exercises &amp; Challenges</a></li>
    <li> <a href="#links"> Links &amp; References</a></li>
    <li> <a href="#aux"> My File of Auxiliary Functions</a></li>
    <li> <a href="#fork"> Fork this Guide on GitHub</a></li>
</ul>
</nav>

<section>
<h2 id="nix"> Installing bc on Linux or macOS </h2>
<p>
On macOS and most Linux operating systems bc will already be installed. 
If not, you can install it using your package manager.
For example on a Debian-based OS like Ubuntu 
run the command <code>sudo apt install bc</code>.
Similarly on macOS you can install bc via 
the <a href="https://brew.sh">homebrew</a> package manager
with the command <code>brew install bc</code>.
</p>
<p>
Running the command <code>bc</code> in your terminal 
will display bc’s <em>copyright</em> banner and start bc interactively.
You can suppress this banner with the <code>-q</code> option,
and load bc’s math library with the <code>-l</code> option.
It’s also helpful to keep a running collection 
of functions you write in a file, say <em>functions.bc</em>, 
which you load into bc on startup.
All of this can be done automatically when you start bc
by setting the environment variable <code>BC_ENV_ARGS</code>,
by including this line in your shell’s (bash, zsh, …) configuration file:
</p>
<pre><code class="language-bash">
export BC_ENV_ARGS="-lq /PATH/TO/functions.bc"
</code></pre>
</section>

<section>
<h2 id="windows"> Installing bc on MS Windows </h2>
<p>
Although bc was originally written for unix-based operating systems,
it’s been 
<a href="http://gnuwin32.sourceforge.net/packages/bc.htm" title="Bc for Windows via GnuWin">ported to windows via GnuWin</a>.
If you have administrative privileges on your Windows machine
just download the Setup files to install bc.
If not—like if you’re using a classroom computer 
locked down by your school’s IT department—you can 
<q>portably</q> install bc.
Download the <a href="http://gnuwin32.sourceforge.net/downlinks/bc-bin-zip.php">Binaries</a> 
and the <a href="http://gnuwin32.sourceforge.net/downlinks/bc-dep-zip.php">Dependencies</a>
zip archives from the GnuWin page.
Extract those zip archives, and move the files somewhere convenient.
Copy the file <em>readline5.dll</em> from the dependencies archive
into the same directory as <em>bc.exe</em>.
You’ll want to keep an auxiliary file of functions you write,
<em>functions.bc</em>, in this same directory.
</p>
<figure>
    <img src="img/files.webp" alt="Screenshot: a directory containing the specified files in Windows" title="This is what my folder containing bc looks like">
    <figcaption>
        Screenshot: a directory containing the specified files in Windows
    </figcaption>
</figure>
<p>
To suppress bc’s <em>copyright</em> banner, 
and automatically load the <a href="#mathlib">math library</a>
and your auxiliary functions when you start bc, 
create a shortcut to <em>bc.exe</em> that includes the arguments 
<code>-lq functions.bc</code> to bc in the <em>Target</em> of the shortcut file.
You could name the shortcut file something distinctive like <em>bcmath</em>
and start it quickly by searching <q>bcmath</q> under the Windows Start menu.
</p>
<figure>
    <img src="img/shortcut.webp" alt="Screenshot: how to edit the Target field in Windows" title="This is what my shortcut target field looks like" >
    <figcaption>
        Screenshot: how to edit the <em>Target</em> field in Windows
    </figcaption>
</figure>
</section>

<section>
<h2 id="usage"> Getting Started Using bc</h2>
<p>
The <a href="https://www.gnu.org/software/bc/manual/html_mono/bc.html">bc manual</a> 
comprehensively describes its usage and features,
so this quick-start guide will be a simple distillation 
of the key ideas and quirks of using bc, 
and a few miscellaneous tips.
</p>
<p>
Since bc is a command-line calculator,
no longer will you waste time commuting your hand between your mouse and keyboard.
Running bc, simply type in an expression, press <kbd>Enter</kbd> to evaluate it,
and the result will be printed on the next line.
To stop any currently running computation (because it’s taking longer than expected)
press <kbd>Ctrl</kbd>+<kbd>C</kbd>.
To quit and exit bc, 
either type the command <code>quit</code>
or press <kbd>Ctrl</kbd>+<kbd>D</kbd>.
</p>
<p>
Any text preceded by a <code>#</code> character is ignored by bc,
which is used for leaving comments in code.
In this guide the output of any bc code 
will be indicated with a <code>#</code>.
</p>
<pre><code class="language-python">
3 + 4
# 5
</code></pre>

<h3 id="var">Using Variables</h3>
<p>
You can assign values to variables using <code>=</code>,
which is helpful for longer computations.
</p>
<pre><code class="language-python">
a = 13846000729558555774154292420
b = 63050430913919525940448
hypotenuse_squared = a^2 + b^2
sqrt(hypotenuse_squared)
# 13846000729702111914156643652.00000000000000000000
</code></pre>
<p>
Variables don’t have to be initialized like they do in most programming languages.
GNU bc will just infer the data type of your variable:
either a number or an <a href="#arrays">array of numbers</a>.
Variable names must start with a lowercase letter, 
but otherwise can be any combination 
of lowercase alphanumerical characters and underscores.
So using <code>h2</code> instead of <code>hypotenuse_squared</code> above
would’ve been just fine.
Capital letters are reserved for computations in bases higher than ten,
and so are not allowed in variable names.
</p>
<p>
The special variable <code>last</code> 
contains the output of the previous command,
allowing you to quickly feed calculation results into new calculations.
Alternatively, a single period character <code>.</code> is a shorthand
for <code>last</code>.
</p>
<pre><code class="language-python">
a = 13846000729558555774154292420
b = 63050430913919525940448
a^2 + b^2
# 191711736206911415591997907991571150760667877089711897104

sqrt(.)
# 13846000729702111914156643652.00000000000000000000
</code></pre>

<h3 id="#scale"> Controlling the Scale of bc’s Computations</h3>
<p>
The special variable <code>scale</code> 
gives you control over the fractional precision of bc’s output,
setting the number of digits 
to the right of the <a href="https://en.wikipedia.org/wiki/Decimal_separator#Radix_point" title="Wikipedia: Radix Point">radix point</a> 
(decimal point in base ten)
that bc will store during computations.
This simple control over the precision of real-number calculations
is the shining feature of bc.
Loading the <a href="#mathlib">math library</a> 
sets <code>scale</code> to 20, 
but you can manually change this to whatever suits your needs:
</p>
<pre><code class="language-python">
sqrt(2)
# 1.41421356237309504880

scale = 42
sqrt(2)
# 1.414213562373095048801688724209698078569671
</code></pre>
<p>
Conversely, there is a function <code>length()</code> 
that returns the number of an input’s significant digits,
and a function <code>scale()</code>
that returns the number of significant digits to the right of the radix point.
</p>
<pre><code class="language-python">
gelfond = 23.1406926
length(gelfond)
# 9

scale(gelfond)
# 7
</code></pre>
<p>
<strong>Caution</strong>: the value of <code>scale</code> is <em>not</em>
the number of decimal places you may assume to be accurate.
Rounding error can accumulate:
</p>
<pre><code class="language-python">
scale=2
9*(1/9)
# .99
</code></pre>
<p>
For a more stark example, see how bc could lead us astray from the fact that
\(\lim_{x \to 0} \frac{\ln(x+1)}{x} = 1\).
Setting <code> scale=5 </code> and 
using <code>l()</code> as the natural log function:
</p>
<pre><code class="language-python">
x=10^(-1); l(x+1)/x
# .95310
</code></pre>
<pre><code class="language-python">
x=10^(-2); l(x+1)/x
# .99500
</code></pre>
<pre><code class="language-python">
x=10^(-3); l(x+1)/x
# .99000
</code></pre>
<pre><code class="language-python">
x=10^(-4); l(x+1)/x
# .90000
</code></pre>
<pre><code class="language-python">
x=10^(-5); l(x+1)/x
# 0
</code></pre>
<p>
All you can say is that the difference 
between your calculated value and the <q>true value</q>
is less than \(10^{n-\text{scale}}\) for some \(n\),
depending on the algorithmic complexity of your calculation
and magnitude of your parameters.
Discovering exactly what \(n\) must be in a given case
requires one dive into the world of
<a title="Wikipedia: Numerical Analysis" href="https://en.wikipedia.org/wiki/Numerical_analysis">numerical analysis</a>.
</p>

<h3 id="pow">Handling Fractional Exponents</h3>
<p>
Simply doing arithmetic in bc, the first thing you’ll notice
is that bc can’t immediately handle non-whole numbers as exponents.
Trying to calculate \(2.71^{3.14}\) as a decimal number 
with the command <code>2.71^3.14</code> will throw an error. 
Instead you’ll need to use a custom function for this,
based on the functions <code>e(x)</code>\( = \mathrm{e}^x\) 
and <code>l(x)</code>\( = \ln(x)\) from bc’s math library,
which do accept fractional parameters.
Here’s a <code>pow</code> function that evaluates \(b^x\)
for an arbitrary base <code>b</code> and exponent <code>x</code>.
</p>
<pre><code class="language-c">
define pow (b,x) { return e(x*l(b)) }
</code></pre>
<p>
Then you can compute \(2.71^{3.14}\) as <code>pow(2.71, 3.14)</code>.
That’s a good function to keep in your auxiliary <em>functions.bc</em> file.
Details about the <a href="#mathlib">math library</a> 
and <a href="#programming">writing functions</a> can be found later in this guide.
</p>

<h3 id="int">Getting the Integer Part of a Number</h3>
<p>
The modus operandi of bc is to work at some fixed scale,
so it doesn’t store the integer part of a number for easy access.
You can calculate the integer part of a number
by temporarily changing the scale though.
</p>
<pre><code class="language-c">
define int(x) {auto s; s=scale; scale=0; x/=1; scale=s; return x;}
</code></pre>
<p>
This is also a helpful function to keep in your auxiliary functions file.
</p>

<h3 id="mathlib"> Extending bc with its Math Library </h3>
<p>
Besides support for basic arithmetic operations 
like addition, multiplication, integer exponentiation, etc,
the only mathematical function built into bc is <code>sqrt()</code>.
Loading bc’s math library with the <code>-l</code> option
defines the following additional functions:
</p>
<pre><code class="language-txt">
s(x)    The sine of x, x is in radians.
c(x)    The cosine of x, x is in radians.
a(x)    The arctangent of x, arctangent returns radians.
l(x)    The natural logarithm of x.
e(x)    The exponential function of raising e to the value x.
j(n,x)  The bessel function of integer order n of x.
</code></pre>
<p>
Only the trigonometric functions sine, cosine, and arctangent are included
<a href="https://unix.stackexchange.com/q/652493/74616" title="'Who decided the bc math library will define sine cosine and arctangent?' on Unix.SE">for historical reasons</a>, 
but really that’s all you need:
all other trigonometric functions can be expressed in terms of these three.
Doing this is left to the user as an exercise,
… or you can find 
<a href="#aux">my implementations at the end of this guide</a>.
</p>
<p>
Since the trigonometric functions in this library 
expect angles expressed in radian measure,
it is helpful to have \(\pi\) stored as a constant.
Define \(\pi\) as four times the arctangent of one, 
<code>pi = 4*a(1)</code>.
You could keep this line in your auxiliary <em>functions.bc</em> file,
along with these functions to convert between degree and radian measure:
</p>
<pre><code class="language-c">
define radtodeg (x) { return x*(45/a(1)) }
</code></pre>
<pre><code class="language-c">
define degtorad (x) { return x*(a(1)/45) }
</code></pre>

<!--
<h3 id="base">Computations in Different Bases</h3>
<aside>
    <a href="https://unix.stackexchange.com/q/199615/74616">don’t use capitals</a>,
    ibase and obase
</aside>
-->
</section>

<section>
<h3 id="programming"> Programming in bc: Functions &amp; Arrays </h3>
<p>
A quick note: this guide is specific to <strong>GNU</strong> bc—there are
other implementations of bc with tighter standards and more/less features.
But GNU bc is the version you’d most likely encounter in the wild.
</p>
<p>
The syntax of bc is similar to the syntax 
of the C programming language, but much looser.
If you have no programming experience you should read the
<a href="https://www.gnu.org/software/bc/manual/html_mono/bc.html#SEC15"><em>Statements</em> section of the bc manual</a>
for a more thorough treatment.
Otherwise if you have some experience programming in C or in any other modern language, 
this section will help you translate that experience over to bc. 
</p>

<h3 id="functions"> Defining Functions </h3>
<p>
The syntax for declaring a function in bc is
</p>
<pre><code class="language-c">
define NAME ( PARAMETERS ) { 
    auto AUTO_LIST
    ...
    return OUTPUT
}
</code></pre>
<p>
where <code>NAME</code> is the name of your function,
<code>PARAMETERS</code> is the list of inputs to your function,
<code>AUTO_LIST</code> is a list of local variables you define 
only for use in this function,
and <code>OUTPUT</code> is the value the function returns.
In the body of the function 
the curly braces <code>{}</code> group 
multiple independent commands together, and either semicolons <code>;</code> 
or newlines (or both) separate those independent commands.
For example, here’s a function that returns the \(n\)<sup>th</sup> Fibonacci number
using the classic 
<a href="https://en.wikipedia.org/wiki/Recursion_(computer_science)" title="Wikipedia: Recursion (computer science)">recursive</a> definition.
</p>
<pre><code class="language-c">
define fibonacci (n) { 
    auto i
    if (n==1 || n==2) {
        return 1
    }
    return fibonacci(n-1) + fibonacci(n-2)
}
</code></pre>

<h3 id="print"> Printing Output &amp; Reading Input</h3>
<p>
Within a function it may be helpful to 
print text to the screen besides just the return value,
or to read user input while the function is running.
For these needs we have respectively the <code>print</code> command
and <code>read()</code> function.
The <code>print</code> command takes a comma-separated list of things
and prints them to the terminal,
while the command <code>x = read()</code> will store
a number entered interactively by a user to the variable <code>x</code>.
For example:
</p>
<pre><code class="language-c">
define fibonacci_ask () { 
    auto r
    print "Which Fibonacci number would you like?\n"
    r = read()
    return fibonacci(r)
}
</code></pre>
<p>
That <code>\n</code> character prints a newline
to the terminal; otherwise bc would prompt 
for input on that same line it printed the question.
</p>


<h3 id="control"> Control-Flow Syntax &amp; Arithmetic</h3>
<p>
All of the control-flow keywords 
<code>if</code>, <code>else</code>, <code>for</code>, <code>while</code>,
<code>continue</code>, <code>break</code>, and <code>halt</code> 
are supported in GNU bc. 
Instead of the keywords <q>true</q> and <q>false</q> 
bc uses the numbers <code>1</code> and <code>0</code> respectively.
To provide some illustrative examples of the use of these keywords:
suppose you need a quick test to tell if two integers 
<code>a</code> and <code>b</code> such that \(2 \lt a \lt b \)
might be adjacent Fibonacci numbers:
</p>
<pre><code class="language-c">
if (int(10*(b/a)) == 16) {
    print "a and b might be adjacent Fibonacci numbers\n"
} else {
    print "a and b cannot be adjacent Fibonacci numbers\n"
}
</code></pre>
<p>
Or suppose you want to nicely display the first 42
Fibonacci numbers along with their index:
</p>
<pre><code class="language-c">
for (i=1; i<=42; ++i) {
    print i, " | ", fibonacci(i), "\n"
}
</code></pre>
<p>
Or suppose you want to find the smallest power of 2
that has a leading digit of 7:
</p>
<pre><code class="language-c">
x = 1
while(1) {
    if (int(x/10^(length(x)-1)) == 7) {
        break
    }
    x*=2
}
print x
</code></pre>
<p>
With the exception of C’s bitwise operations 
and two other special cases, bc shares all of C’s 
<a href="https://www.gnu.org/software/bc/manual/html_mono/bc.html#SEC10">arithmetic, assignment, comparison, and logical operators</a>.
Those two special cases are these:
</p>
<ul>
    <li>
        The caret <code>^</code> is an <em>integer</em> exponential operator, 
        not a bitwise operator. The command <code>a ^= b</code> 
        does the same thing as <code>a = a^b</code>.
    </li>
    <li>
        The modulus operator <code>%</code> behaves the same in bc as in C
        only when scale is set to zero. 
        Functionally <code>a % b</code> returns <code>a-(a/b)*b</code>
        regardless of the value of <code>scale</code>.
        In the language of the remainder theorem, 
        you can think of this general modulus operator this way:
        for a fixed scale \(n\),
        <code>a % b</code> returns the unique non-negative number \(r\)
        less than \(b\times 10^{-n}\) for which there exists a number \(q\)
        such that \(q \times 10^n\) is an integer and
        \(a = q \times b + r\,.\)
        For example, <code>scale=3; 8%7</code> returns <code>0.006</code>
        since \(8 = 1.142\times7 + 0.006\,.\)
    </li>
</ul>

<h3 id="arrays">Array Variables &amp; Loops </h3>
<p>
In addition to simple variables, bc supports array variables, 
iterable collection of variables indexed by non-negative integers
(indexing starts at zero).
The index of an array you’d like to access
is indicated by enclosing it in square brackets
<code>[</code><code>]</code> after the array’s name.
That is, the variable \(a_i\) for some \(i\in \mathbf{Z}^+\) is denoted as
<code>a[i]</code> in bc.
</p>
<pre><code class="language-python">
a[1] = 13846000729558555774154292420
a[2] = 63050430913919525940448
h2 = a[1]^2 + a[2]^2
sqrt(h2)
# 13846000729702111914156643652.00000000000000000000
</code></pre>
<p>
Simple variables and array variables of the same name 
can co-exist with no conflict: 
letting <code>a = a[1]^2 + a[2]^2</code> in that last example
would have been just fine.
Like simple variables, arrays don’t have to be initialized,
and the size of an array never needs to be declared.
The maximum size of an array in bc is 
set as <code>BC_DIM_MAX</code>,
<a href="https://unix.stackexchange.com/q/704891/74616">a value chosen at compile time</a>.
In my current version of bc, this value is \(2^{24}\,.\)
</p>
<p>
Arrays are useful for looping over some enumeration of data.
For example, we can write a more efficient <code>fibonacci()</code> function 
by using a for-loop and storing previously computed Fibonacci numbers 
in an array <code>fib</code>:
</p>
<pre><code class="language-c">
define fibonacci (n) { 
    auto i, fib
    fib[1] = fib[2] = 1
    for (i=2; i<=n; ++i) {
        fib[i] = fib[i-1] + fib[i-2]
    }
    return fib[n]
}
</code></pre>

<h3 id="limits">Limitation of bc </h3>
<p>
There are a couple limitations of bc you should keep in mind
when considering if you’d like to use a more robust programming language.
</p>
<p>
In bc you cannot pass functions as parameters to other functions.
The only variable types—and so the only entities
that may be functions parameters—are simple variables and arrays.
This limitation makes for messy code,
where any function that morally <em>should</em> have a function
as a parameter instead has to assume a globally-defined function
of a fixed name already exists.
I’ve been using the convention that such a function must be
globally defined and named <code>f</code>,
and its derivative named <code>ff</code>.
</p>
<p>
You cannot explicitly define the contents of an entire array at once.
I.e. the syntax <code>array = {8, 6, 7}</code> is not accepted,
and instead you’d have to use:
</p>
<pre><code class="language-python">
array[0] = 8; array[1] = 6; array[2] = 7; 
</code></pre>
<p>
Similarly, since bc doesn't keep track of the size of an array,
there is no command to print the entire contents of an array.
Instead you must keep track of the size of an array yourself
and loop over the indices to individually print the entries.
This makes working with data in bc cumbersome,
and doing any sort of statistics impossible.
</p>
<p>
On a related note, you can’t return an array from a function.
Instead you have to pass your array by reference as a parameter,
a feature of GNU bc not documented in the manual.
The syntax for this in demonstrated in this example:
</p>
<pre><code class="language-c">
define fibonacci_next (*array[], n) {
    array[n] = array[n-1] + array[n-2]
    return array[n]
}
</code></pre>
<pre><code class="language-python">
fib[42] = 267914296
fib[43] = 433494437
fibonacci_next(fib[], 44)
# 701408733

fib[44]
# 701408733
</code></pre>
<p>
Additionally there is not built-in support for matrices 
(arrays-of-arrays, 2D arrays).
</p>
</section>

<!--
<section>
<h3 id="readline">GNU Readline Keyboard Shortcuts</h3>
Using bc interactively, 
there are a few keyboard shortcuts provided by 
<a href="https://en.wikipedia.org/wiki/GNU_Readline#Emacs_keyboard_shortcuts">GNU readline</a>
to make navigating long commands easier.
Here some of the more helpful ones.
</p>
<ul>
    <li> 
        <h4><kbd>Ctrl</kbd>+<kbd>a</kbd> </h4>
        Move the cursor to the st<strong>a</strong>rt of the line; like <kbd>Home</kbd>
    </li>
    <li> 
        <h4><kbd>Ctrl</kbd>+<kbd>e</kbd> </h4>
        Move the cursor to the <strong>e</strong>nd of the line; like <kbd>End</kbd>
    </li>
    <li>
        <h4><kbd>Alt</kbd>+<kbd>b</kbd> </h4>
        Move the cursor <strong>b</strong>ack one word
    </li>
    <li>
        <h4><kbd>Alt</kbd>+<kbd>f</kbd> </h4>
        Move the cursor <strong>f</strong>orward one word
    </li>
    <li> 
        <h4><kbd>Ctrl</kbd>+<kbd>t</kbd> </h4>
        <strong>T</strong>ranspose the current and previous character
    </li>
    <li> 
        <h4><kbd>Ctrl</kbd>+<kbd>p</kbd> or <kbd>↑</kbd> </h4>
        Access the <strong>p</strong>revious entry in the command history
    </li>
    <li> 
        <h4><kbd>Ctrl</kbd>+<kbd>n</kbd> or <kbd>↓</kbd> </h4>
        Access the <strong>n</strong>ext entry in the command history
    </li>
    <li> 
        <h4><kbd>Ctrl</kbd>+<kbd>l</kbd> </h4>
        C<strong>l</strong>ear the screen
    </li>
</ul>
</section>
-->

<section>
<h2 id="exercises"> Exercises &amp; Challenges</h2>
<p>
The best way to learn a new tool is on the job;
start using bc instead of whatever basic calculator you’ve been using,
and if you teach be sure to install it on your classroom computer
to have at hand during a lesson.
In case you need some initial inspiration to dive into bc,
here are some tasks you can complete as practice.
</p>
<p>
I’ve written functions to complete some of these tasks
in my own <em>functions.bc</em> file,
<a href="https://github.com/mikepierce/GNU-bc-Functions">which you can find on GitHub</a>,
in case you’d like to compare solutions.
</p>
<ol>
    <li>
        <h4>The Quadratic Formula</h4> 
        <p>
        Write a function that takes the coefficients
        of a quadratic  polynomial \(ax^2 + bx + c\) as input
        and prints the roots of that polynomial.
        Since there are two <q>outputs</q> of this function
        you’ll likely want to <code>print</code> one of the roots 
        and return the other.
        Alternatively, using bc version ≥1.07.1 you could print both roots
        and have your function return nothing
        using the <code>void</code> keyword:
        </p>
<pre><code class="language-c">
define void f (a,b,c) { ... }
</code></pre>
        <p>
        For more of a challenge,
        try to (efficiently) write the function
        to compute the roots of a cubic or a quartic polynomial.
        </p>
    </li>
    <li>
        <h4>Digit Manipulation</h4> 
        <p>
        What is the 10000<sup>th</sup> digit in the decimal expansion of \(\pi\)?
        </p>
        <p>
        More generally, write a function that takes a decimal number \(x\) as input
        and for some \(n \lt \)<code>scale</code> returns the \(n\)<sup>th</sup>
        digit to the right of the decimal place in \(x\,.\)
        </p>
    </li>
    <li>
        <h4>Decimal Digit as an Array</h4> 
        Given a decimal number \(x\) 
        create an array and write a loop that will 
        store the first \(n\) digits to the right of
        the decimal point in \(x\) in the indices in the array.
    </li>
    <li>
        <h4>Newton’s Method</h4>
        <p>
        For a differentiable function <code>f</code>=\(f\) with a zero
        and its derivative <code>ff</code>=\(f'\) 
        implement <a title="Wikipedia: Newton's Method" href="https://en.wikipedia.org/wiki/Newton's_method">Newton’s method</a> 
        of approximating a root of \(f\).
        </p>
        <p>
        Then use this function to compute
        the <a title="Wikipedia: Dottie Number" href="https://en.wikipedia.org/wiki/Dottie_number">Dottie number</a>,
        the constant defined to be the single real solution
        to the equation \(\cos(x) = x\,,\)
        accurate to 42 decimal places.
        </p>
    </li>
    <li>
        <h4>Numerical Integration</h4>
        <p>
        Write a function that, given a globally defined function <code>f</code>,
        approximates the value of the definite integral
        \[
        \int\limits_a^b f(x)\,\mathrm{d}x\,.
        \]
        Can you write this function 
        to accurately compute the value of the integral up to <code>scale</code>?
        </p>
    </li>
    <li>
        <h4>Prime Factorization</h4>
        Write a function that prints the prime factorization of its input.
    </li>
</ol>
</section>

<section>
<h2 id="links"> Links &amp; References </h2>
<p> 
    See the <a href="https://www.gnu.org/software/bc/manual/html_mono/bc.html">GNU bc manual</a> 
    to learn <em>all</em> of bc’s functionality.
    If you have a question and you can’t find the answer in the manual,
    you can ask general questions about bc on the
    <a href="https://unix.stackexchange.com/questions/tagged/bc?sort=newest">Unix &amp; Linux Stack Exchange</a>, 
    or programming-related questions about bc on 
    <a href="https://stackoverflow.com/questions/tagged/bc">Stack Overflow</a>. 
</p>
<p> 
    The maintainer of <code>phodd.net</code>
    has authored a huge <a href="http://phodd.net/gnu-bc/">library of bc functions</a> 
    and written a helpful <a href="http://phodd.net/gnu-bc/bcfaq.html">bc FAQ page</a>.
    Additionally, Keith Matthews has 
    written <a href="http://www.numbertheory.org/gnubc/gnubc.html">some number theory programs for bc</a>.
    So if you need a specific algorithm you don’t want to implement yourself, 
    these are the first places you should check.
</p> 
<p> 
    And if you’re ever on Twitter having an argument 
    that could be settled with a computation, there is
    <a href="https://twitter.com/bc_l">a Twitter bot @bc_l that will execute bc code</a>.  
</p>
</section>

<section>
<h2 id="aux"> My File of Auxiliary Functions </h2>
<p>
In case you’re not excited by the romantic notion
of implementing mathematical functions yourself as you need them,
here are two options:
copy all of the <q>basic</q> functions below into your own 
<em>functions.bc</em> auxiliary file 
to give you a more usable base to start using bc from,
or feel free to fork/clone my personal working file of
<a href="https://github.com/mikepierce/GNU-bc-Functions">bc functions from GitHub</a>.
</p>
<pre><code class="language-python">
##################################################################
### Helpful Constants and Functions

pi=4*a(1)
ex=e(1)
define abs(x) { if (x>0) return x; return -x }
define sgn(x) { if (x>0) return 1; return -1 }

# Return the integer-part of a number (not the floor)
define int(x) {auto s; s=scale; scale=0; x/=1; scale=s; return x;}

##################################################################
### Logarithms & Exponentials

define log(x) { return l(x) }
define exp(x) { return e(x) }
define logb(x,b) { return l(x)/l(b) }
define pow(x,n) { return e(n*l(x)) }

##################################################################
### Trigonometry

define radtodeg(x) { return x*(45/a(1)) }
define degtorad(x) { return x*(a(1)/45) }

define cos(x) { return c(x) }
define sin(x) { return s(x) }
define tan(x) { return s(x)/c(x) }
define sec(x) { return 1/c(x) }
define csc(x) { return 1/s(x) }
define cot(x) { return c(x)/s(x) }
define arccos(x) {
    if(x == 1) return 0
    if(x == -1) return pi
    return pi/2-a(x/sqrt(1-(x^2)))
}
define arcsin(x) {
    if(x == 1) return pi/2
    if(x == -1) return -pi/2
    return sgn(x)*a(sqrt((1/(1-(x^2)))-1))
}
define arctan(x) { return a(x) }
define arcsec(x) { return arccos(1/x) }
define arccsc(x) { return arcsin(1/x) }
define arccot(x) { return pi/2-a(x) }

# Display the Pythagorean triple generated by integers m and n,
# and return the hypotenuse
define pythagtriple(m,n) {
    print abs(n*n-m*m), "\n"
    print abs(2*m*n), "\n"
    return m*m+n*n
}

##################################################################
### Combinatorics

define factorial(n) {
    return n*factorial(n-1)
}

# Return nCk, the number of ways to choose k of n objects
define choose(n,k) {
    return int(factorial(n)/(factorial(n-k)*factorial(k)))
}

# Return nPk, the number of ways to permute k of n objects
define pick(n,k) {
    auto i, r
    r = n-k
    for (i=1; n > r; --n)
        i*=n
    return i
}
</code></pre>
</section>

<section>
<h2 id="fork"> Fork this Guide on GitHub </h2>
<p>
    In keeping with the 
    <a href="https://maggieappleton.com/garden-history" title="Maggie Appleton: A Brief History & Ethos of the Digital Garden">ethos of digital gardening</a>,
    and of the internet being a living, community-tended library of humanity’s collective knowledge,
    I don't want this page to become a corpse of my sole authorship 
    cluttering the stacks of our library.
    What a tragic abuse of the internet that would be.
    No, I’d rather simply be the … maintainer? custodian? groundskeeper? … of this living guide.
    Please feel free to become a co-author and tend to this page with me.
</p>
<p>
    <h4>CONTRIBUTING</h4>
    The <a href="https://web.dev/learn/html/semantic-html">semantic HTML</a> for this page is 
    <a href="https://github.com/mikepierce/Article-GNU-bc-Guide">hosted on GitHub</a>,
    licensed as <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1">CC BY-NC-SA 4.0</a>.
    If you’d like to suggest an edit or addition to my instance of this guide,
    <a href="https://github.com/mikepierce/Article-GNU-bc-Guide/issues">create an issue on GitHub</a>, 
    fork the repository, make your changes, and submit a pull request.
    My only requirement of co-authors of this instance
    is that you keep with the spirit of the page 
    as a <em>quick-start guide</em> written with an audience of 
    mathematicians, instructors, and students in mind—professional programmers 
    and Unix administrators are already well-served by the GNU bc manual itself.
</p>
</section>
</main>

<footer>
<ul>
    <li> © <a href="..">Mike Pierce</a> </li>
    <li> <a href="https://www.coloradomesa.edu/math-stat">CMU Math</a> </li>
    <li> License <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1">CC BY-NC-SA 4.0</a> </li>
</ul>
<cite>
    Banner and thumb use <q><a target="_blank" rel="noopener noreferrer" href="https://www.flickr.com/photos/46191841@N00/3676227162">Calculator</a></q> by <a target="_blank" rel="noopener noreferrer" href="https://www.flickr.com/photos/46191841@N00">Jorge Franganillo</a>, licensed under <a target="_blank" rel="noopener noreferrer" href="https://creativecommons.org/licenses/by/2.0/?ref=openverse">CC BY 2.0</a>
</cite>
</footer>

</body>
</html>

